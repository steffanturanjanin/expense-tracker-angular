<app-timeline-sidebar
  [months$]="months$"
  (monthlyReportSelected)="onMonthlyReportSelected($event)"
  (overallReportSelected)="onOverallReportSelected($event)"
>
</app-timeline-sidebar>

<div class="dashboard-container">
  <h1>Dashboard</h1>
  <p>{{reportPeriod}}</p>
  <mat-divider></mat-divider>
  <mat-grid-list cols="12" rowHeight="150px">
    <mat-grid-tile colspan="6" rowspan="3">
      <mat-card>
        <mat-card-title>
          Total expenses by category
        </mat-card-title>
        <mat-spinner [diameter]="60" *ngIf="(requestingCategories$ | async) || (requestingExpenses$ | async)">

        </mat-spinner>
        <app-pie-chart
          [expenses$]="expenses$"
          [categories$]="categories$"
          [requestingExpenses$]="requestingExpenses$"
          [requestingCategories$]="requestingCategories$">
        </app-pie-chart>
      </mat-card>
    </mat-grid-tile>
    <mat-grid-tile colspan="6" rowspan="3">
      <mat-card>
        <mat-card-title>
          Categories by consumption
        </mat-card-title>
        <mat-spinner [diameter]="60" *ngIf="(requestingCategories$ | async) || (requestingExpenses$ | async)">

        </mat-spinner>
        <app-bar-chart
          [expenses$]="expenses$"
          [categories$]="categories$"
          [requestingExpenses$]="requestingExpenses$"
          [requestingCategories$]="requestingCategories$">
        </app-bar-chart>
      </mat-card>
    </mat-grid-tile>
    <mat-grid-tile colspan="12" rowspan="3">
      <mat-card>
        <mat-spinner [diameter]="60" *ngIf="(requestingReport$ | async)">

        </mat-spinner>
        <app-overall-expense-report-bar-chart
          *ngIf="(reportType$ | async) === 'overall'"
          [report$]="report$"
          [requestingReport$]="requestingReport$">
        </app-overall-expense-report-bar-chart>
        <app-monthly-expense-report-bar-chart
          *ngIf="(reportType$ | async) === 'monthly'"
          [report$]="report$"
          [requestingReport$]="requestingReport$">
        </app-monthly-expense-report-bar-chart>
      </mat-card>
    </mat-grid-tile>
  </mat-grid-list>
</div>
